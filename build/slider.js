var cb=cb||{};cb.Slider=function(){var t=this;this.view=document.getElementById("slider"),this.max=parseInt(getComputedStyle(this.view).width,10)-innerWidth,this.offset=this.min=0,this.pressed=!1,this.timeConstant=325,this.velocity,this.amplitude,this.ticker,this.overlay=document.getElementById("overlay"),this.init(),"undefined"!=typeof window.ontouchstart&&(this.view.addEventListener("touchstart",this.tap.bind(this)),this.view.addEventListener("touchmove",this.drag.bind(this)),this.view.addEventListener("touchend",this.release.bind(this))),this.view.addEventListener("mousedown",this.tap.bind(this)),this.view.addEventListener("mousemove",this.drag.bind(this)),this.view.addEventListener("mouseup",this.release.bind(this)),window.addEventListener("resize",this.resize.bind(this)),this.indicator=document.getElementById("indicator"),this.relative=(innerWidth-30)/this.max,this.xform="transform",["webkit","Moz","O","ms"].every(function(i){var e=i+"Transform";return"undefined"!=typeof t.view.style[e]?(xform=e,!1):!0})},cb.Slider.prototype={init:function(){this.snap=parseInt(getComputedStyle(document.getElementById("item1")).width,10),this.overlay.style.left=2*this.snap+"px"},xpos:function(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientX:t.clientX},scroll:function(t){this.offset=t>this.max?this.max:t<this.min?this.min:t,this.view.style[xform]="translateX("+-this.offset+"px)",this.indicator.style[xform]="translateX("+this.offset*this.relative+"px)"},track:function(){var t,i,e,s;t=Date.now(),i=t-this.timestamp,this.timestamp=t,e=this.offset-this.frame,this.frame=this.offset,s=1e3*e/(1+i),this.velocity=.5*s+.2*this.velocity},autoScroll:function(){var t,i;this.amplitude&&(t=Date.now()-this.timestamp,i=-this.amplitude*Math.exp(-t/this.timeConstant),i>.5||-.5>i?(this.scroll(this.target+i),requestAnimationFrame(this.autoScroll.bind(this))):this.scroll(this.target))},tap:function(t){return this.pressed=!0,this.reference=this.xpos(t),this.velocity=this.amplitude=0,this.frame=this.offset,this.timestamp=Date.now(),clearInterval(this.ticker),this.ticker=setInterval(this.track.bind(this),100),t.preventDefault(),t.stopPropagation(),!1},drag:function(t){var i,e;return this.pressed&&(i=this.xpos(t),e=this.reference-i,(e>2||-2>e)&&(this.reference=i,this.scroll(this.offset+e))),t.preventDefault(),t.stopPropagation(),!1},release:function(t){return this.pressed=!1,clearInterval(this.ticker),this.target=this.offset,(this.velocity>10||this.velocity<-10)&&(this.amplitude=.8*this.velocity,this.target=this.offset+this.amplitude),this.target=Math.round(this.target/this.snap)*this.snap,this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this.autoScroll.bind(this)),t.preventDefault(),t.stopPropagation(),!1},resized:function(){this.init(),this.autoScroll.bind(this),this.view.classList.contains("disabled")&&this.view.classList.remove("disabled")},resize:function(t){this.resizeFinished;var i=this;clearTimeout(this.resizeFinished),this.resizeFinished=setTimeout(this.resized.bind(i),1e3),this.view.classList.contains("disabled")||this.view.classList.add("disabled")}},window.onload=function(){new cb.Slider};